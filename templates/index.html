{% extends "base.html" %} {% block title %}Artwork Catalog{% endblock %} {%
block content %}
<header class="text-center my-5">
  <h1>Artwork Catalog</h1>
  <p class="lead">A definitive record of an artist's oeuvre.</p>
</header>

<div class="row mb-4 justify-content-center">
  <div class="col-md-8">
    <form action="{{ url_for('index') }}" method="GET" class="d-flex">
      <input
        class="form-control me-2"
        type="search"
        placeholder="Search by Artist or Title..."
        name="search"
        value="{{ search_query or '' }}"
        aria-label="Search"
      />
      <button class="btn btn-outline-primary" type="submit">Search</button>
    </form>
  </div>
</div>

<table class="table table-hover align-middle">
  <thead class="table-dark">
    <tr>
      <th>Image</th>
      <th>Artwork Title</th>
      <th>Artist Name</th>
      <th>Date Added</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for artwork in artworks %}
    <tr>
      <td>
        <img
          src="{{ url_for('uploaded_file', filename=artwork.image_filename) if artwork.image_filename else 'https://via.placeholder.com/100' }}"
          alt="{{ artwork.artwork_title }}"
          style="width: 100px; height: 100px; object-fit: cover"
          class="rounded"
        />
      </td>
      <td>{{ artwork.artwork_title }}</td>
      <td>{{ artwork.artist_name }}</td>
      <td>{{ artwork.date_added }}</td>
      <td>
        <a
          href="{{ url_for('view_artwork', artwork_uuid=artwork.artwork_uuid) }}"
          class="btn btn-primary btn-sm"
          >View / Edit</a
        >
        <form
          action="{{ url_for('delete_artwork', artwork_uuid=artwork.artwork_uuid) }}"
          method="POST"
          class="d-inline"
        >
          <button
            type="submit"
            class="btn btn-danger btn-sm"
            onclick="return confirm('Are you sure you want to delete this artwork?')"
          >
            Delete
          </button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr>
      <td colspan="5" class="text-center">
        {% if search_query %} No artworks found matching your search for "{{
        search_query }}". {% else %} No artworks found.
        <a href="{{ url_for('add_artwork') }}">Add one to get started!</a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
